---
layout: post
title:  "Instalar Windows 11 en KVM Linux"
date:   2026-01-01 10:32:00
categories: windows11 kvm linux
---

# Instalar MS Windows 11 en maquina virtual KVM Linux

⠀⠀⠀⣤⣴⣾⣿⣿⣿⣿⣿⣶⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡄
⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⢰⣦⣄⣀⣀⣠⣴⣾⣿⠃
⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⡏⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⠀
⠀⠀⣼⣿⡿⠿⠛⠻⠿⣿⣿⡇⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀
⠀⠀⠉⠀⠀⠀⢀⠀⠀⠀⠈⠁⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⠇⠀
⠀⠀⣠⣴⣶⣿⣿⣿⣷⣶⣤⠀⠀⠀⠈⠉⠛⠛⠛⠉⠉⠀⠀⠀
⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⣶⣦⣄⣀⣀⣀⣤⣤⣶⠀⠀
⠀⣾⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⡟⠀⠀
⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⠁⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀
⢠⣿⡿⠿⠛⠉⠉⠉⠛⠿⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⠁⠀⠀
⠘⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⢿⣿⣿⣿⣿⣿⠿⠛⠀⠀⠀

Regularmente doy acompañamiento técnico a personas defensoras de derechos humanos y periodistas. Gracias a ello, tengo amplia experiencia trabajando con distintos sistemas operativos, más allá de mi sistema de cabecera, que es Debian.

Para poder brindar soporte de manera eficiente, en mi computadora principal gestiono con [KVM](https://wiki.debian.org/KVM) varias máquinas virtuales que replican los entornos de las personas a las que acompaño. Entre ellas, siempre he mantenido máquinas virtuales con Windows, además de otros sistemas.

Con el reciente cambio forzado a Windows 11, documentado por Microsoft aquí:
[https://support.microsoft.com/es-es/windows/-puedo-actualizar-a-windows-11-14c25efc-ecb7-4ce6-a3dd-7e2e24476997](https://support.microsoft.com/es-es/windows/-puedo-actualizar-a-windows-11-14c25efc-ecb7-4ce6-a3dd-7e2e24476997)

me vi en la necesidad de instalar una máquina virtual con Windows 11. Para ello, actualicé una máquina virtual existente con Windows 10. Sin embargo, para poder validar correctamente la actualización, es necesario realizar los siguientes pasos:

correr regedit desde la ventana "ejecutar", que abrira el [registro](https://es.wikipedia.org/wiki/Registro_de_Windows),

{% highlight c++ %}

## localizar lo siguiente  en el registro:

HKEY_LOCAL_MACHINE\SYSTEM\Setup\MoSetup

crear "DWORD (32 bits)"

"AllowUpgradesWithUnsupportedTPMOrCPU" con valor =  1.

en la siguiente parte del registro:

HKEY_LOCAL_MACHINE\SYSTEM\Setup\

crear nueva clave "LabConfig"

dentro de LabConfig, crea DWORD (32-bit) con los siguientes valores :

"BypassTPMCheck" con valor = 1.
"BypassSecureBootCheck" con valor = 1.
"BypassRAMCheck" con valor = 1.
{% endhighlight %}

Apaga todas las MV en ejecución y detener el módulo **kvm_probe** con el siguiente comando:

{% highlight c++ %}
$ sudo modprobe -r kvm_intel
{% endhighlight %}

Activa la característica anidada:
{% highlight c++ %}

$ sudo modprobe kvm_intel nested=1

{% endhighlight %}

y ahora si ejecuta la actualización a windows 11 desde el "Windows Update" (buscar actualizaciones)

deberia de pasar por alto las restricciones y comenzar con la actualización a Windows 11.
